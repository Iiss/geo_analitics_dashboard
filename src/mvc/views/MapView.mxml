<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/halo">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
		import flash.display.Graphics;
		import flash.filters.BlurFilter;
		import flash.filters.DropShadowFilter;
		import flash.filters.GlowFilter;
		import mvc.views.components.CellLabel;
		
		public function drawGrid(col:int=32,rows:int=18):void
		{
			var col_w:Number = width / col;
			var row_h:Number = height / rows;
			var g:Graphics = mapOverlay.graphics;
			
			mapTiles.requestedColumnCount = col;
			mapTiles.requestedRowCount = rows;
			mapTiles.columnWidth = col_w;
			mapTiles.rowHeight = row_h;
			
			mapOverlay.removeAllElements();
			
			g.clear();
			g.lineStyle(0.25, 0xffffff,.3);
			
			for (var x:int = 1; x <= col; x++)
			{
				g.moveTo(x*col_w, 0);
				g.lineTo(x * col_w, height);
				
				var l:CellLabel = new CellLabel()
				
				l.width = col_w;
				l.text = (x - 1).toString()
				l.x = (x-1) * col_w;
				l.y = 2;
				
				mapOverlay.addElement(l);
			}
			
			for (var y:int = 1; y <= rows; y++)
			{
				g.moveTo(0,y*row_h);
				g.lineTo(width, y * row_h);
				
				l = new CellLabel();
				
				l.text = (y - 1).toString()
				l.height = 6;
				l.x = 2;
				l.y = (y - .5) * row_h - .5 * l.height;
				
				mapOverlay.addElement(l);
			}
		}
		]]>
	</fx:Script>
	<s:Image width="100%" height="100%" scaleMode="zoom"
		source="data/map.jpg"/>
	<s:List id="tileList" width="100%" height="100%" borderVisible="false" contentBackgroundAlpha="0"
	 mouseEnabled="false" mouseChildren="false"
	 itemRenderer="mvc.views.itemRenderers.TileRenderer" >
		<s:layout>
			<s:TileLayout id="mapTiles" verticalGap="0" horizontalGap="0"/>
		</s:layout>
	</s:List>
	<s:Group id="mapOverlay" width="100%" height="100%" />
	<s:Group id="clickArea" width="100%" height="100%" >
		<s:Rect width="100%" height="100%" alpha="0">
		<s:fill>
			<s:SolidColor color="0x000000"/>
		</s:fill>
	</s:Rect>
	</s:Group>
	
	<s:BorderContainer width="150" x="400" height="400">
		<s:layout>
			<s:VerticalLayout paddingTop="5" paddingBottom="5" paddingLeft="5" paddingRight="5"/>
		</s:layout>
		<s:List id="layersList" width="100%" 
			itemRenderer="mvc.views.itemRenderers.LayerListItemRenderer" >
				 <s:layout>
					<s:VerticalLayout horizontalAlign="justify" gap="0" />
				</s:layout>
		</s:List>
		<s:TextArea height="100%" width="100%"/>
		<s:Button id="scanBtn" label="Scan Request" width="100%"/>
		<s:Button id="mineBtn" label="Mine Request" width="100%"/>
	</s:BorderContainer>
	
</s:Group>